{% extends '_main_base.jinja2' %}
{% from "_forms_helpers.jinja2" import render_submit %}
{% from "common/_company_base.jinja2" import render_company_form_fields,
                                             render_company_logo_modal_javascript,
                                             render_company_logo_modal %}

{% block body %}
    <div class="row">
        <div class="col offset-1">
            <div class="row">
                <div class="col-md-7">
                    <h1 class=" px-3 py-1 page-header mb-4">Edit Company</h1> {{ enable_button(is_company_enabled, company_id) }}
                </div>
            </div>
        </div>
    </div>
    <div class="row mt-4">
        <div class="offset-lg-1 col-lg-10 col-xl-8">

            <form action="{{ url_for(form_action, company_id=company_id) }}" method="post">

                {{ render_company_form_fields(
                        form,
                        submit_label="Save changes",
                        company_id=company_id) }}

            </form>

            {{ render_company_logo_modal() }}

        </div>
    </div>

{% endblock body %}

{% macro enable_button(is_company_enabled, company_id) %}
    {% set label = 'Enable' if not is_company_enabled else 'Disable' %}
    {% set url = url_for('company_actions_post', company_id=company_id, action=('enable' if not is_company_enabled else 'disable')) %}
    <form style="float:right" action="{{ url }}" method="post">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
        <button type="submit" class="btn btn-info">{{ label }}</button>
    </form>
{% endmacro %}

{% block footer_scripts %}
    {{ render_company_logo_modal_javascript(company_id=company_id, form_action=form_action) }}
{% endblock %}
